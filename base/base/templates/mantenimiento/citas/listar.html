{% extends 'partials/body.html' %}
{% block contenido %}
<a href="{% url 'citas-crear' %}" class="btn btn-success w-25">Crear {{ titulo }}</a>
<div class="card fondcard m-5">
  <div class="card-body">
          <table id="example" class="table table-striped" style="width: 100%">
            <thead>
              <tr>
                <th>ID</th>
                <th>Fecha Cita</th>
                <th>Hora Cita</th>
                <th>Contacto</th>
                <th>Descripcion</th>
                <th>Estado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              {% for cita in citas %}
                {% if cita.estado != "0" %}
                  <tr>
                    <td>{{ cita.id }}</td>
                    <td>{{ cita.fecha_cita }}</td>
                    <td>{{ cita.hora_cita }}</td>
                    <td>{{ cita.contacto }}</td>
                    <td>{{ cita.descripcion_cita }}</td>
                    <td>{{ cita.estado_cita }}</td>
                    <td>
                      <button type="button" onclick="changeURL('{{ cita.id }}')" data-taller-pinautos="{{ cita.id }}" class="btnEliminar btn btn-danger" data-bs-toggle="modal" data-bs-target="#modalConf">
                        <i class="bi bi-trash"></i>
                      </button>
                      <a class="btn btn-primary" href="{% url 'citas-modificar' cita.id %}">
                        <i class="bi bi-pencil-square"></i>
                      </a>
                    </td>
                  </tr>
                {% endif %}
              {% endfor %}
            </tbody>
          </table>
      </div>
  </div>
  <script>
    new DataTable('#example', {
      dom: 'Bfrtip',
      scrollY: '200px',
      buttons: [
        {
          extend: 'excel',
          text: '<i class="bi bi-file-earmark-excel"></i> Excel',
          className: 'btn btn-success', 
        },
        {
          extend: 'pdf',
          text: '<i class="bi bi-filetype-pdf"></i> PDF',
          className: 'btn btn-danger', 
        },
        {
          extend: 'print',
          text: '<i class="bi bi-printer"></i> Imprimir',
          className: 'btn btn-primary', 
        },
      ],
    });
  </script>
{% endblock contenido %}